<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–ù–∞—Ä–∏—Å—É–π –º–∞—Ä—à—Ä—É—Ç –Ω–∞ –≠–≤–µ—Ä–µ—Å—Ç</title>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      text-align: center;
      background-color: #000;
      color: #fff;
    }

    canvas {
      display: block;
      margin: 0 auto;
      border: 2px solid #444;
      background-image: url('everest-map-resized.jpg');
      background-size: cover;
      cursor: crosshair;
    }

    button {
      margin-top: 10px;
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      background: #00bfa5;
      color: white;
    }

    #result {
      margin-top: 15px;
      font-size: 18px;
    }
  </style>
</head>
<body>

  <h2>–ù–∞—Ä–∏—Å—É–π –º–∞—Ä—à—Ä—É—Ç –Ω–∞ –≠–≤–µ—Ä–µ—Å—Ç üèîÔ∏è</h2>
  <canvas id="canvas" width="800" height="600"></canvas>
  <button onclick="checkRoute()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
  <div id="result"></div>

  <script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    let drawing = false;
    let userPath = [];

    // –≠—Ç–∞–ª–æ–Ω–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç (—É–ø—Ä–æ—â—ë–Ω: –º–∞—Å—Å–∏–≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç)
    const referencePath = [
      [120, 550], [140, 520], [160, 490], [190, 460],
      [220, 440], [260, 410], [300, 380], [340, 350],
      [380, 320], [420, 290], [470, 260], [510, 230],
      [560, 200], [610, 180], [660, 160], [700, 140]
    ];

    canvas.addEventListener('mousedown', () => {
      drawing = true;
      userPath = [];
      ctx.beginPath();
    });

    canvas.addEventListener('mouseup', () => {
      drawing = false;
    });

    canvas.addEventListener('mousemove', e => {
      if (!drawing) return;
      const rect = canvas.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      userPath.push([x, y]);
      ctx.lineTo(x, y);
      ctx.strokeStyle = "#00ff88";
      ctx.lineWidth = 3;
      ctx.stroke();
    });

    function distance(p1, p2) {
      return Math.sqrt((p1[0]-p2[0])**2 + (p1[1]-p2[1])**2);
    }

    function checkRoute() {
      if (userPath.length < 5) {
        document.getElementById('result').textContent = "–ù–∞—Ä–∏—Å—É–π—Ç–µ –º–∞—Ä—à—Ä—É—Ç!";
        return;
      }

      let matched = 0;
      const threshold = 30;

      for (let ref of referencePath) {
        for (let point of userPath) {
          if (distance(ref, point) < threshold) {
            matched++;
            break;
          }
        }
      }

      const score = Math.round((matched / referencePath.length) * 100);
      document.getElementById('result').textContent =
        `‚úÖ –í—ã —É–≥–∞–¥–∞–ª–∏ –º–∞—Ä—à—Ä—É—Ç –Ω–∞ ${score}%`;
    }
  </script>

</body>
</html>